<!DOCTYPE html>
<html>
  <head>
    <title>Promo Zoom ID - Customer Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta version="v.1.0.1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
<style>
.kontener {
    display: table;
    margin: auto;
}
.body {
    display: table-cell;
    vertical-align: middle;
	width: 500px;
	padding: 20px;
	}

	th, td {
    padding: 3px;
	padding-left: 10px;
	text-align: left; 
    vertical-align: middle;	
	}
.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}
</style>
  </head>
  <body>
  <br>
  <div align="center">
  <!-- Modal -->
<div class="modal fade" id="gaadaWA" role="dialog" data-backdrop="static" data-keyboard="false" tabindex="-1"
      aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" >
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel" id="headerintro">Promo Zoom ID</h5>
      </div>
      <div class="modal-body">
        <div class="mb-3">
        Masa berlaku link ini sudah habis. Silahkan hubungi Administrator
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-primary" id="btn1" onclick="location.href='https://promozoomid.github.io'">Oke</button>
      </div>
    </div>
  </div>
</div>
<br>
  <h2 id="pesan">Mohon tunggu sebentar...</h2>
  </div>
  <script>
localStorage.setItem("backup",location.href)
var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;
    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
};
var param = getUrlParameter('customer');
localStorage.setItem("wa",param)
fetch("https://script.google.com/macros/s/AKfycbzseDMVrvnQwkFMuMVj4TxF8QyBxbgwMolnIF3UtQ/exec?action=test&data="+param, {
   'method' : 'get'}).then(function(response) {
    return response.text().then(function(hasil) {
	text = hasil.split("|") 
	if ( text=="Gaada"){
  var myModal = new bootstrap.Modal(document.getElementById("gaadaWA"), {backdrop:'static',keyboard:false});
    myModal.show();
}
else if( text.length > 1){
var tgl = new Date()
tgl.setDate(tgl.getDate() + 1)
localStorage.setItem("expired",tgl.getTime())
localStorage.setItem("hasil",hasil)
location.href = "zoomlist.html"
}
else{
text = hasil.split(",")
sessionStorage.setItem("ID",text[0])
sessionStorage.setItem("tgl",text[2])
sessionStorage.setItem("jam",text[3])
sessionStorage.setItem("durasi",text[4])
sessionStorage.setItem("IDmeeting",text[5])
sessionStorage.setItem("tipe",text[6])
sessionStorage.setItem("pengundang",text[7])
sessionStorage.setItem("streamingurl",text[9])
sessionStorage.setItem("streamingkey",text[10])
sessionStorage.setItem("streamingpage",text[11])
sessionStorage.setItem("status",text[12])
sessionStorage.setItem("tipeasli",text[13])
if ( text[14] != null){
	sessionStorage.setItem("tgltrial",text[14])
	sessionStorage.setItem("jamtrial",text[15])
}
sessionStorage.setItem("new","ya")
if (text[5] != "" && text[5] != "QRIS") {
var param = [text[5],text[13]]
fetch("https://script.google.com/macros/s/AKfycbzseDMVrvnQwkFMuMVj4TxF8QyBxbgwMolnIF3UtQ/exec?action=getUrl&data="+param, {
  'method' : 'get'}).then(function(response) {
    return response.text().then(function(text) {
	var e = text.split("|")
	sessionStorage.setItem("url",e[0])
	if (e[1] == "undefined"){e[1]=""}
	sessionStorage.setItem("password",e[1])
	sessionStorage.setItem("topic",e[2])
	sessionStorage.setItem("agenda",e[3])
	localStorage.setItem("lihat","Ya")
	location.href = "zoomview.html"
	var tgl = new Date()
	tgl.setDate(tgl.getDate() + 1)
  localStorage.setItem("expired",tgl.getTime())})})
  .catch(function(error) {
  alert("Terjadi Error saat mengirim/menerima data, silakan coba lagi")
  document.querySelector("#pesan").innerHTML = "Error... Silahkan Muat Ulang Halaman Ini"
})}
else{
var tgl2 = new Date(text[2].split("-")[0],text[2].split("-")[1],text[2].split("-")[2],text[3].split(":")[0],text[3].split(":")[1])
var tgl = new Date()
tgl.setDate(tgl.getDate() + 1)
localStorage.setItem("expired",tgl.getTime())
if (text[5] == "QRIS"){location.replace("qris.html")}
else{
localStorage.setItem("new","ya")
location.replace("zoom.html")}
}
}
})})
.catch(function(error) {
  alert("Terjadi Error saat mengirim/menerima data, silakan coba lagi")
  document.querySelector("#pesan").innerHTML = "Error... Silahkan Muat Ulang Halaman Ini"
})
  </script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  </body>
  </html>
